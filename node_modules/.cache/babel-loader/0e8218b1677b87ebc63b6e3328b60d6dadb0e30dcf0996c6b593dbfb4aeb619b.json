{"ast":null,"code":"import _regeneratorRuntime from\"/Users/ageudev_1/Documents/Main Desktop/Estudos/Estudo de Porgramac\\u0327a\\u0303o/Rocketseat/Ignite/learning-folder/rocketseat-ignite_course/reactjs/old-content/chapter-II/dtmoney/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"/Users/ageudev_1/Documents/Main Desktop/Estudos/Estudo de Porgramac\\u0327a\\u0303o/Rocketseat/Ignite/learning-folder/rocketseat-ignite_course/reactjs/old-content/chapter-II/dtmoney/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"/Users/ageudev_1/Documents/Main Desktop/Estudos/Estudo de Porgramac\\u0327a\\u0303o/Rocketseat/Ignite/learning-folder/rocketseat-ignite_course/reactjs/old-content/chapter-II/dtmoney/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/ageudev_1/Documents/Main Desktop/Estudos/Estudo de Porgramac\\u0327a\\u0303o/Rocketseat/Ignite/learning-folder/rocketseat-ignite_course/reactjs/old-content/chapter-II/dtmoney/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/ageudev_1/Documents/Main Desktop/Estudos/Estudo de Porgramac\\u0327a\\u0303o/Rocketseat/Ignite/learning-folder/rocketseat-ignite_course/reactjs/old-content/chapter-II/dtmoney/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{createContext,useEffect,useState,useContext}from'react';import{api}from'../services/api';import{jsx as _jsx}from\"react/jsx-runtime\";export var TransactionsContext=/*#__PURE__*/createContext({});export function TransactionsProvider(_ref){var children=_ref.children;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),transactions=_useState2[0],setTransactions=_useState2[1];useEffect(function(){api.get('transactions').then(function(response){return setTransactions(response.data.transactions);});},[]);function createTransaction(_x){return _createTransaction.apply(this,arguments);}function _createTransaction(){_createTransaction=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(transactionInput){var response,transaction;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return api.post('/transactions',_objectSpread(_objectSpread({},transactionInput),{},{createdAt:new Date()}));case 2:response=_context.sent;transaction=response.data.transaction;setTransactions([].concat(_toConsumableArray(transactions),[transaction]));case 5:case\"end\":return _context.stop();}},_callee);}));return _createTransaction.apply(this,arguments);}return/*#__PURE__*/_jsx(TransactionsContext.Provider,{value:{transactions:transactions,createTransaction:createTransaction},children:children});}export function useTransactions(){var context=useContext(TransactionsContext);return context;}","map":{"version":3,"names":["createContext","useEffect","useState","useContext","api","jsx","_jsx","TransactionsContext","TransactionsProvider","_ref","children","_useState","_useState2","_slicedToArray","transactions","setTransactions","get","then","response","data","createTransaction","_x","_createTransaction","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","transactionInput","transaction","wrap","_callee$","_context","prev","next","post","_objectSpread","createdAt","Date","sent","concat","_toConsumableArray","stop","Provider","value","useTransactions","context"],"sources":["/Users/ageudev_1/Documents/Main Desktop/Estudos/Estudo de Porgramação/Rocketseat/Ignite/learning-folder/rocketseat-ignite_course/reactjs/old-content/chapter-II/dtmoney/src/hooks/useTransactions.tsx"],"sourcesContent":["import { createContext, useEffect, useState, ReactNode, useContext } from 'react';\nimport { api } from '../services/api';\n\ninterface Transaction {\n  id: number;\n  title: string;\n  amount: number;\n  type: string;\n  category: string;\n  createdAt: string;\n}\n\ninterface TransactionsProviderProps {\n  children: ReactNode\n}\n\ntype TransactionInput = Omit<Transaction, 'id' | 'createdAt'>\n\ninterface TransactionsContextData {\n  transactions: Transaction[];\n  createTransaction: (transaction: TransactionInput) => Promise<void>;\n}\n\nexport const TransactionsContext = createContext<TransactionsContextData>(\n  {} as TransactionsContextData\n);\n\nexport function TransactionsProvider({ children }: TransactionsProviderProps) {\n  const [transactions, setTransactions] = useState<Transaction[]>([]);\n\n  useEffect(() => {\n    api.get('transactions')\n    .then(response => setTransactions(response.data.transactions))\n  }, []);\n\n  async function createTransaction(transactionInput: TransactionInput) {\n    const response = await api.post('/transactions', {\n      ...transactionInput,\n      createdAt: new Date(),\n    });\n    const { transaction } = response.data;\n\n    setTransactions([\n      ...transactions,\n      transaction\n    ])\n  }\n\n  return (\n    <TransactionsContext.Provider value={{ transactions, createTransaction }}>\n      { children }\n    </TransactionsContext.Provider>\n  )\n}\n\nexport function useTransactions() {\n  const context = useContext(TransactionsContext);\n\n  return context;\n}\n"],"mappings":"o0CAAA,OAASA,aAAa,CAAEC,SAAS,CAAEC,QAAQ,CAAaC,UAAU,KAAQ,OAAO,CACjF,OAASC,GAAG,KAAQ,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAsBtC,MAAO,IAAM,CAAAC,mBAAmB,cAAGP,aAAa,CAC9C,CAAC,CACH,CAAC,CAED,MAAO,SAAS,CAAAQ,oBAAoBA,CAAAC,IAAA,CAA0C,IAAvC,CAAAC,QAAQ,CAAAD,IAAA,CAARC,QAAQ,CAC7C,IAAAC,SAAA,CAAwCT,QAAQ,CAAgB,EAAE,CAAC,CAAAU,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA5DG,YAAY,CAAAF,UAAA,IAAEG,eAAe,CAAAH,UAAA,IAEpCX,SAAS,CAAC,UAAM,CACdG,GAAG,CAACY,GAAG,CAAC,cAAc,CAAC,CACtBC,IAAI,CAAC,SAAAC,QAAQ,QAAI,CAAAH,eAAe,CAACG,QAAQ,CAACC,IAAI,CAACL,YAAY,CAAC,GAAC,CAChE,CAAC,CAAE,EAAE,CAAC,CAAC,QAEQ,CAAAM,iBAAiBA,CAAAC,EAAA,SAAAC,kBAAA,CAAAC,KAAA,MAAAC,SAAA,YAAAF,mBAAA,EAAAA,kBAAA,CAAAG,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAhC,SAAAC,QAAiCC,gBAAkC,MAAAX,QAAA,CAAAY,WAAA,QAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAE,IAAA,SAC1C,CAAA/B,GAAG,CAACgC,IAAI,CAAC,eAAe,CAAAC,aAAA,CAAAA,aAAA,IAC1CR,gBAAgB,MACnBS,SAAS,CAAE,GAAI,CAAAC,IAAI,CAAC,CAAC,EACtB,CAAC,QAHIrB,QAAQ,CAAAe,QAAA,CAAAO,IAAA,CAINV,WAAW,CAAKZ,QAAQ,CAACC,IAAI,CAA7BW,WAAW,CAEnBf,eAAe,IAAA0B,MAAA,CAAAC,kBAAA,CACV5B,YAAY,GACfgB,WAAW,EACZ,CAAC,yBAAAG,QAAA,CAAAU,IAAA,MAAAf,OAAA,GACH,UAAAN,kBAAA,CAAAC,KAAA,MAAAC,SAAA,GAED,mBACElB,IAAA,CAACC,mBAAmB,CAACqC,QAAQ,EAACC,KAAK,CAAE,CAAE/B,YAAY,CAAZA,YAAY,CAAEM,iBAAiB,CAAjBA,iBAAkB,CAAE,CAAAV,QAAA,CACrEA,QAAQ,CACkB,CAAC,CAEnC,CAEA,MAAO,SAAS,CAAAoC,eAAeA,CAAA,CAAG,CAChC,GAAM,CAAAC,OAAO,CAAG5C,UAAU,CAACI,mBAAmB,CAAC,CAE/C,MAAO,CAAAwC,OAAO,CAChB"},"metadata":{},"sourceType":"module","externalDependencies":[]}